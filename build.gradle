apply plugin: 'java'
apply plugin: 'groovy'

def compatibilityVersion = 1.5
sourceCompatibility = compatibilityVersion
targetCompatibility = compatibilityVersion

repositories {
    mavenCentral()
    mavenLocal()
}

sourceSets {
    main {
        classesDir = file('war/WEB-INF/classes')
    }
}

dependencies {
    def appEngineVersion = '1.7.0'
    groovy 'org.codehaus.groovy:groovy-all:2.0.1'
    compile "com.google.appengine:appengine-api-1.0-sdk:$appEngineVersion",
            "com.google.appengine:appengine-api-labs:$appEngineVersion",
            'org.gaelyk:gaelyk:2.0'
    compile "com.ocpsoft:ocpsoft-pretty-time:1.0.7"
}

webAppDirName = file('war')

clean.doLast {
     delete 'war/WEB-INF/classes'
}

task copyRuntimeLibraries {
    def webAppLibDirName = 'war/WEB-INF/lib'
    description = "Copies runtime libraries to $webAppLibDirName."

    copy {
        into webAppLibDirName
        from configurations.runtime.files
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.1'
}